name: slack-notify
on:
  push:
   
jobs:
  slack-notify:
    runs-on: ubuntu-latest
    steps:
      - name: Check Out Repository
        uses: actions/checkout@v2

      - name: create csv
        run: |
          touch test.csv

      - name: Send CSV to Slack
        run: |
            CSV_FILE=$(ls *.csv)
            curl -F file=@$CSV_FILE -F "initial_comment=Here is the generated CSV file" -F channels=#actions-notif -H "Authorization: Bearer $SLACK_WEBHOOK" <https://slack.com/api/files.upload>
        env:
            SLACK_CSV_APP_TOKEN: ${{ secrets.SLACK_CSV_APP_TOKEN }}
        